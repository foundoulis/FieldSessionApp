<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8">
  <title>Transform Launcher</title>
  <link rel="stylesheet" href="mainscreen.css">

  <!-- Attempting to implement the RSS news feed with the google feed api -->
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script src="http://www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js" type="text/javascript"></script>

  <style type="text/css">
    @import url("http://www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css");
    #feedControl {
      margin-top: 10px;
      margin-left: auto;
      margin-right: auto;
      width: 440px;
      font-size: 12px;
      color: #9CADD0;
    }
  </style>
  <script type="text/javascript">
    function load() {
      var feed = "http://feeds.bbci.co.uk/news/world/rss.xml";
      new GFdynamicFeedControl(feed, "feedControl");

    }
    google.load("feeds", "1");
    google.setOnLoadCallback(load);
  </script>

</head>

<body onload="window.resizeTo(900, 550)">
  <div class="logo">
    <div>
      <img src="di_logo_login.png" alt="https://login.drillinginfo.com/auth/resources/7.0.0.ga/login/di-theme/img/di_logo_login.png" width="75%" height="19%" id="logo">
    </div>
  </div>

  <div id="version">
    <h3> Version </h3>
  </div>

  <div class="user">
    <h2 id="username">
      username
    </h2>
    <div>
      <!-- TODO add tooltip text to icons -->
      <img src="../icons/transform.png" width="15%" height="15%" id="launch">
      <!-- <span class="tooltiptext">transfrom</span> -->
      <img src="../icons/beta_1.png" width="15%" height="15%" id="beta">
      <!-- <span class="tooltiptext">beta user</span> -->
      <img src="../icons/support_1.png" width="15%" height="15%" id="mms">
      <!-- <span class="tooltiptext">support user</span> -->
    </div>
  </div>

  <div class="news-border">
    <div class="news">
      <h2> News </h2>
      <?xml version="1.0" encoding="UTF-8" ?>
      <rss version="2.0">

        <div id="body">
          <div id="feedControl">Loading...</div>
        </div>


    </div>
  </div>

  <div class="tools">
    <h2 id="header"> Tools </h2>
  </div>

  <div class="update">
    <button id='update'>Update</button>
  </div>

  <div class="progress-bar">
    <!-- <span class="bar"> -->
    <div class="progress"></div>
    <!-- </span> -->
  </div>

  <div class="launch">
    <button id="launch">Launch</button>
  </div>

</body>

<script type="text/javascript">
  var update = document.getElementById('update');
  update.onclick = function() {
    console.log('Update Button');
  }

  var launch = document.getElementById('launch');
  launch.onclick = function() {
    console.log('Launch Button');
  }

  function execCommand(command, callback) {
    exec(command, (error, stdout, stderr) => {
      if (error !== null) {
        console.log('exec error: ' + error);
      }
      callback(stdout);
    });
  }

  function parser(commandOutput) {
    auth = JSON.parse(commandOutput);
    //printJSON(auth);
  }



  require('./src/renderer.js');
  var curlCommand =
    "curl -X POST \ https://di-api.dev.drillinginfo.com/v1/x4m/authorizations \ -H 'authorization: Bearer <<ACCESS TOKEN>>'\ -H 'cache-control: no-cache'\ -H 'content-type: application/json'\ -H 'x-api-key: 1d77ee834f92ece6b2ddd38b5ccc6b13'\ -d '{"
  requests ":[{"
  uri ": "
  http: //app.drillinginfo.com/x4m/x4m60", "action": "GET"},{"uri":"http://app.drillinginfo.com/4xm/x4mms","action": "GET"},{"uri":"http://app.drillinginfo.com/x4m/x4mbeta","action":"GET"}]}'"

    execCommand(curlCommand, parser);
  var perm1 = auth.authorizations[0].result;
  var perm2 = auth.authorizations[1].result;
  var perm3 = auth.authorizations[2].result;
</script>

</html>
